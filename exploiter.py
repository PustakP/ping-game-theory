import random

from utils.types import History, Move

class Strategy:
    def __init__(self):
        self.name = 'exploiter'
        
        self.max_consecutive_steals = 0
        self.consecutive_steals = 0
        self.failed_attempts = 0
        
        
    def begin(self) -> Move:
        self.consecutive_steals += 1
        return Move.STEAL
    
    def turn(self, history:History) -> Move:
        if (
            self.consecutive_steals != 0 and
            history[-1].opponent == Move.STEAL
        ):
            self.failed_attempts += 1
            self.max_consecutive_steals = self.consecutive_steals
            self.consecutive_steals = 0
            return Move.SPLIT
        else:
            self.consecutive_steals += 1
            return Move.STEAL